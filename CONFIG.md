# Конфигурация

## hints.txt

- Формат: одна строка — один hint (слово или фраза).
- Регистр не важен. Пунктуация не обязательна.
- Рекомендуется 10–50 строк.
- Примеры:
```
Кулошвили
Байшев
Богушев
Судья
У вас есть вопросы
Документов вообще никаких нет
Когда выводятся документы
```

## speakers_map.json

- Формат: JSON-словарь «фраза или regex → имя спикера».
- Доступны два типа ключей:
  - Обычная строка (подстрочный поиск, с нормализацией: нижний регистр, без пунктуации, схлопывание пробелов).
  - Регулярное выражение c префиксом `re:`. Пример: `"re:не\\s*9(\\s*сентябр[ья])?"`.
- При совпадении сегменту присваивается `speaker_name` и имя распространяется на все сегменты с тем же `speaker_id`.

Пример:
```json
{
  "я не помню уже": "Кулошвили",
  "когда выводятся документы": "Судья",
  "re:это\\s*было\\s*не\\s*9(\\s*сентябр[ья])?": "Судья",
  "re:не\\s*9\\s*событ(ия|ий|е)": "Судья",
  "у вас есть вопросы?": "Байшев"
}
```

## Выбор гипотез по hints

- В нормализации из n-best гипотез (сейчас 3) выбирается та, у которой больше совпадений с hints (после нормализации).
- Это повышает шанс корректных терминов/имён.

## Дедупликация при рендере

- Сегменты с пустым текстом и `speaker_id == -1` отбрасываются.
- Дубликаты для одного спикера определяются по:
  - временной близости/перекрытию,
  - совпадению текста (после нормализации),
  - подстрочному включению с долей длины,
  - схожести по словам (Jaccard/coverage).
- Оставляется более длинный сегмент.

## Таймауты

- `no_speech_timeout≈2s`, `eou_timeout≈0.6s`, `max_speech_timeout≈20s`.
- Влияют на разбиение речи на сегменты.
